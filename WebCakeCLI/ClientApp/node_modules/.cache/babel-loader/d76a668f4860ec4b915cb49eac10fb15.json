{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\WebBanhNgot\\\\WebCakeCLI\\\\ClientApp\\\\src\\\\components\\\\Admin\\\\ProductManagement\\\\ProductForm.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { actFetchCategoryRequest } from '../../../actions/category';\nimport { actFetchProductRequest, actAddProductRequest, actEditProductRequest } from '../../../actions/product';\n\nclass ProductForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      var target = e.target;\n      var name = target.name; //txtName, txtPhone\n\n      var value = target.value;\n      console.log(name + \" \" + value);\n\n      if (name == \"productPrice\" || name == \"categoryId\") {\n        value = parseInt(value);\n      }\n\n      if (name == \"categoryId\") {\n        this.setState({\n          \"categoryId\": value\n        });\n      } else {\n        this.setState({\n          [name]: value\n        });\n      }\n\n      console.log(this.state); //this.props.onHandleChange(this.state);\n    };\n\n    this.onSelect = e => {\n      var target = e.target;\n      var name = target.name; //txtName, txtPhone\n\n      var value = target.value;\n      console.log(name + \" \" + value);\n\n      if (name == \"categoryId\") {\n        value = parseInt(value);\n      }\n\n      this.setState({\n        [name]: value\n      });\n      console.log(this.state); //this.props.onHandleChange(this.state);\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        file: URL.createObjectURL(event.target.files[0])\n      });\n    };\n\n    this.state = {\n      productDescriptions: '',\n      productId: 0,\n      productName: '',\n      productPrice: 0,\n      productUnit: '',\n      categoryId: 1,\n      productImage: '',\n      productSize: 'nhỏ'\n    };\n  }\n\n  componentDidMount() {\n    this.props.fetchCategory(); //var id = useParams();\n    //console.log(id);\n\n    if (this.props.match) {\n      console.log(this.props.match.match.params.id);\n      this.props.fetchProduct(this.props.match.match.params.id);\n      this.setState({\n        file: \"images/\" + this.props.product.productImage\n      }); // API lấy sản phẩm qua id\n      //this.setState({ product : this.props.product })\n    }\n  } //componentDidMount() {\n  //    //this.state = this.props.product;\n  //    this.setState({ product: this.props.product })\n  //}\n\n\n  selectProductCategory(categories) {\n    var list = null;\n\n    if (categories.length > 0) {\n      list = categories.map((category, index) => {\n        return React.createElement(\"option\", {\n          key: category.categoryId,\n          value: category.categoryId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, category.categoryName);\n      });\n    }\n\n    return list;\n  }\n\n  SaveProduct() {\n    if (this.state.productId == 0) {\n      console.log(this.state);\n      this.props.addProduct(this.state);\n    } else {\n      this.props.editProduct(this.state);\n    }\n  }\n\n  render() {\n    var {\n      categories,\n      product\n    } = this.props;\n    return React.createElement(\"div\", {\n      className: \"container p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Th\\xEAm s\\u1EA3n ph\\u1EA9m\"), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"T\\xEAn s\\u1EA3n ph\\u1EA9m: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      onChange: this.onChange,\n      value: this.state.productName,\n      name: \"productName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"H\\xECnh \\u1EA3nh: \"), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"product-img\",\n      id: \"fileItem\",\n      src: this.state.file,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Lo\\u1EA1i s\\u1EA3n ph\\u1EA9m: \"), React.createElement(\"select\", {\n      value: this.state.categoryId,\n      name: \"categoryId\",\n      onChange: this.onChange,\n      id: \"abc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.selectProductCategory(categories))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\u0110\\u01A1n v\\u1ECB t\\xEDnh: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      onChange: this.onChange,\n      value: this.state.productUnit,\n      name: \"productUnit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"M\\xF4 t\\u1EA3: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      onChange: this.onChange,\n      value: this.state.productDescriptions,\n      name: \"productDescriptions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      style: {\n        fontSize: '18px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"G\\xEDa: \"), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      onChange: this.onChange,\n      value: this.state.productPrice,\n      name: \"productPrice\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), React.createElement(Link, {\n      className: \"btn btn-primary mr-2\",\n      to: \"/admin/productList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Quay L\\u1EA1i\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: () => this.SaveProduct(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"L\\u01B0u L\\u1EA1i\")));\n  }\n\n}\n\nvar mapStateToProps = state => {\n  return {\n    categories: state.categories,\n    product: state.products\n  };\n};\n\nvar mapDispathToProps = (dispatch, props) => {\n  return {\n    fetchCategory: () => {\n      dispatch(actFetchCategoryRequest());\n    },\n    fetchProduct: id => {\n      dispatch(actFetchProductRequest(id));\n    },\n    addProduct: product => {\n      dispatch(actAddProductRequest(product));\n    },\n    editProduct: product => {\n      dispatch(actEditProductRequest(product));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispathToProps)(ProductForm);","map":{"version":3,"sources":["C:/Users/Admin/Documents/WebBanhNgot/WebCakeCLI/ClientApp/src/components/Admin/ProductManagement/ProductForm.js"],"names":["React","Component","Link","connect","actFetchCategoryRequest","actFetchProductRequest","actAddProductRequest","actEditProductRequest","ProductForm","constructor","props","onChange","e","target","name","value","console","log","parseInt","setState","state","onSelect","handleChange","event","file","URL","createObjectURL","files","productDescriptions","productId","productName","productPrice","productUnit","categoryId","productImage","productSize","componentDidMount","fetchCategory","match","params","id","fetchProduct","product","selectProductCategory","categories","list","length","map","category","index","categoryName","SaveProduct","addProduct","editProduct","render","textAlign","fontSize","mapStateToProps","products","mapDispathToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { actFetchCategoryRequest } from '../../../actions/category';\r\nimport { actFetchProductRequest, actAddProductRequest, actEditProductRequest } from '../../../actions/product';\r\n\r\nclass ProductForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            productDescriptions: '',\r\n            productId: 0,\r\n            productName: '',\r\n            productPrice: 0,\r\n            productUnit: '',\r\n            categoryId: 1,\r\n            productImage: '',\r\n            productSize: 'nhỏ'\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.props.fetchCategory();\r\n\r\n        \r\n        //var id = useParams();\r\n        //console.log(id);\r\n        if (this.props.match) {\r\n            console.log(this.props.match.match.params.id);\r\n            this.props.fetchProduct(this.props.match.match.params.id);\r\n            this.setState({ file: \"images/\" + this.props.product.productImage }); // API lấy sản phẩm qua id\r\n            //this.setState({ product : this.props.product })\r\n        }\r\n    }\r\n    //componentDidMount() {\r\n    //    //this.state = this.props.product;\r\n    //    this.setState({ product: this.props.product })\r\n    //}\r\n\r\n    selectProductCategory(categories) {\r\n\r\n        var list = null;\r\n        if (categories.length > 0) {\r\n            list = categories.map((category, index) => {\r\n                return (<option key={category.categoryId} value={category.categoryId}>{category.categoryName}</option>)\r\n            })\r\n        }\r\n        return list;\r\n    }\r\n\r\n    SaveProduct() {\r\n        if (this.state.productId == 0) {\r\n            console.log(this.state);\r\n            this.props.addProduct(this.state);\r\n        }\r\n        else {\r\n            this.props.editProduct(this.state);\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n        var target = e.target;\r\n        var name = target.name; //txtName, txtPhone\r\n        var value = target.value;\r\n        console.log(name + \" \" + value);\r\n        if ((name == \"productPrice\") || (name == \"categoryId\") ){\r\n            value = parseInt(value);\r\n        }\r\n        if (name == \"categoryId\") {\r\n            this.setState({\r\n                \"categoryId\": value\r\n            })\r\n        }\r\n        else {\r\n            this.setState({\r\n                [name]: value\r\n            });\r\n        }\r\n\r\n        console.log(this.state);\r\n        //this.props.onHandleChange(this.state);\r\n    }\r\n    onSelect = (e) => {\r\n        var target = e.target;\r\n        var name = target.name; //txtName, txtPhone\r\n        var value = target.value;\r\n        console.log(name + \" \" + value);\r\n        if (name == \"categoryId\") {\r\n            value = parseInt(value);\r\n        }\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n\r\n\r\n        console.log(this.state);\r\n        //this.props.onHandleChange(this.state);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n\r\n        this.setState({\r\n            file: URL.createObjectURL(event.target.files[0])\r\n        });\r\n    }\r\n\r\n    render() {\r\n        var { categories, product } = this.props;\r\n        return(\r\n            <div className=\"container p-5\">\r\n                <h1 style={{textAlign: 'center'}}>Thêm sản phẩm</h1>\r\n                <form >\r\n                    <div className=\"form-group\">\r\n                        <label style={{fontSize:'18px'}}>Tên sản phẩm: </label>\r\n                        <input type=\"text\" className=\"form-control\" onChange={this.onChange} value={this.state.productName} name=\"productName\"/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label style={{ fontSize: '18px' }}>Hình ảnh: </label>\r\n                        <input type=\"file\" onChange={this.handleChange} />\r\n                        <img className=\"product-img\" id=\"fileItem\" src={this.state.file} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label style={{ fontSize: '18px' }}>Loại sản phẩm: </label>\r\n                        <select value={this.state.categoryId} name=\"categoryId\" onChange={this.onChange} id=\"abc\">\r\n                            {this.selectProductCategory(categories)}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label style={{ fontSize: '18px' }}>Đơn vị tính: </label>\r\n                        <input type=\"text\" className=\"form-control\" onChange={this.onChange} value={this.state.productUnit} name=\"productUnit\" />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label style={{ fontSize: '18px' }}>Mô tả: </label>\r\n                        <input type=\"text\" className=\"form-control\" onChange={this.onChange} value={this.state.productDescriptions} name=\"productDescriptions\" />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label style={{ fontSize: '18px' }}>Gía: </label>\r\n                        <input type=\"number\" className=\"form-control\" onChange={this.onChange} value={this.state.productPrice} name=\"productPrice\" />\r\n                    </div>\r\n                    <Link className=\"btn btn-primary mr-2\" to=\"/admin/productList\">Quay Lại</Link>\r\n                    <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.SaveProduct()}>Lưu Lại</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nvar mapStateToProps = state => {\r\n    return {\r\n        categories: state.categories,\r\n        product: state.products\r\n    }\r\n}\r\n\r\nvar mapDispathToProps = (dispatch, props) => {\r\n    return {\r\n        fetchCategory: () => {\r\n            dispatch(actFetchCategoryRequest());\r\n        },\r\n        fetchProduct: (id) => {\r\n            dispatch(actFetchProductRequest(id));\r\n        },\r\n        addProduct: (product) => {\r\n            dispatch(actAddProductRequest(product));\r\n        },\r\n        editProduct: (product) => {\r\n            dispatch(actEditProductRequest(product))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispathToProps)(ProductForm);"]},"metadata":{},"sourceType":"module"}