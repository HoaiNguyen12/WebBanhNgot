{"ast":null,"code":"import * as types from './../contraints/index';\nvar initialState = {\n  items: [],\n  total: 0\n};\n\nconst cart = (state = initialState, action) => {\n  var {\n    product,\n    quantity\n  } = action;\n  var index = -1;\n\n  switch (action.type) {\n    case types.ADD_TO_CART:\n      index = findProductInCart(state.items, product);\n\n      if (index !== -1) {\n        state.items[index].quantity += quantity;\n      } else {\n        state.items.push({\n          product,\n          quantity\n        });\n      }\n\n      state.total++;\n      localStorage.setItem('CART', JSON.stringify(state));\n      return state;\n\n    case types.DELETE_PRODUCT_IN_CART:\n      index = findProductInCart(state.items, product);\n\n      if (index !== -1) {\n        state.items.splice(index, 1);\n      }\n\n      ;\n      state.total -= quantity;\n      localStorage.setItem('CART', JSON.stringify(state));\n      return state;\n\n    case types.UPDATE_PRODUCT_IN_CART:\n      index = findProductInCart(state.items, product);\n\n      if (index !== -1) {\n        state.items[index].quantity = quantity;\n      }\n\n      state.total += quantity;\n      localStorage.setItem('CART', JSON.stringify(state));\n      return state;\n\n    case types.DELETE_CART:\n      state.splice(state.items[0], state.items.length);\n      state.total = 0;\n      localStorage.removeItem('CART');\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nvar findProductInCart = (cart, product) => {\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};\n\nexport default cart;","map":{"version":3,"sources":["C:/Users/Admin/Documents/WebBanhNgot/WebCakeCLI/ClientApp/src/reducers/cart.js"],"names":["types","initialState","items","total","cart","state","action","product","quantity","index","type","ADD_TO_CART","findProductInCart","push","localStorage","setItem","JSON","stringify","DELETE_PRODUCT_IN_CART","splice","UPDATE_PRODUCT_IN_CART","DELETE_CART","length","removeItem","i","id"],"mappings":"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","sourcesContent":["import * as types from './../contraints/index';\r\n\r\nvar initialState = {\r\n    items: [],\r\n    total : 0\r\n};\r\n\r\nconst cart = (state = initialState, action) => {\r\n    var { product, quantity } = action;\r\n    var index = -1;\r\n    switch(action.type){\r\n        case types.ADD_TO_CART:\r\n            index = findProductInCart(state.items, product);\r\n            if(index !== -1){\r\n                state.items[index].quantity += quantity;\r\n            }else {\r\n                state.items.push({\r\n                    product,\r\n                    quantity\r\n                });\r\n            }\r\n            state.total++;\r\n            localStorage.setItem('CART', JSON.stringify(state));\r\n            return state;\r\n        case types.DELETE_PRODUCT_IN_CART:\r\n            index = findProductInCart(state.items, product);\r\n            if(index !== -1){\r\n                state.items.splice(index,1);\r\n            };\r\n            state.total -= quantity;\r\n            localStorage.setItem('CART',JSON.stringify(state));\r\n            return state;\r\n        case types.UPDATE_PRODUCT_IN_CART:\r\n            index = findProductInCart(state.items, product);\r\n            if(index !== -1){\r\n                state.items[index].quantity = quantity;\r\n            }\r\n            state.total += quantity;\r\n            localStorage.setItem('CART', JSON.stringify(state));\r\n            return state;\r\n        case types.DELETE_CART:\r\n            state.splice(state.items[0], state.items.length);\r\n            state.total = 0;\r\n            localStorage.removeItem('CART');\r\n            return state;\r\n        default: return state;\r\n    }\r\n}\r\n\r\nvar findProductInCart = (cart, product) =>{\r\n    var index = -1;\r\n    if(cart.length > 0){\r\n        for(var i = 0; i < cart.length; i++){\r\n            if(cart[i].product.id === product.id){\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return index;\r\n}\r\n\r\nexport default cart;"]},"metadata":{},"sourceType":"module"}